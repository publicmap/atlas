(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{17:function(e,t,o){"use strict";o.r(t);var a=o(0);a.a;var s=o(13),l=o(1);const n={};var c=o(8);function i(e,t,o){const{getMap:a,getMapbox:s}=Object(l.c)(n),i=a();s();let{position:r="bottom-right"}=t,{options:b={}}=t;return i.addControl(new c.a,r),e.$$set=e=>{"position"in e&&o(0,r=e.position),"options"in e&&o(1,b=e.options)},[r,b]}class r extends a.a{constructor(e){super(),Object(a.C)(this,e,i,null,a.L,{position:0,options:1})}}var b=r;function p(e,t,o){const{getMap:a,getMapbox:s}=Object(l.c)(n),c=a();s();let{position:i="bottom-left"}=t,{options:r={}}=t;class b{constructor(e={}){this.container=document.createElement("div")}onAdd(e){return this.map=e,this.map.on("mapTitle",this.titleListener),this.container}onRemove(){this.map.off("mapTitle",this.titleListener),this.map=void 0}styleChangeListener(){this.map.off("mapTitle",this.titleListener),this.setTitle("HI")}setTitle(e){return e}}return c.addControl(new b,i),e.$$set=e=>{"position"in e&&o(0,i=e.position),"options"in e&&o(1,r=e.options)},[i,r,b]}class m extends a.a{constructor(e){super(),Object(a.C)(this,e,p,null,a.L,{position:0,options:1,LanguageControl:2})}get LanguageControl(){return this.$$.ctx[2]}}var d=m,u=o(12);function j(e,t,o){const a=Object(l.b)(),{getMap:s,getMapbox:c}=Object(l.c)(n),i=s();c();let{styles:r=[{label:"Streets",styleName:"Mapbox Streets",styleUrl:"mapbox://styles/mapbox/streets-v9"},{label:"Satellite",styleName:"Satellite",styleUrl:"mapbox://styles/mapbox/satellite-v9"}]}=t,{position:b="bottom-right"}=t;return i.addControl(new u.a({styles:r,onChange:e=>a("change",{style:e})}),b),e.$$set=e=>{"styles"in e&&o(0,r=e.styles),"position"in e&&o(1,b=e.position)},[r,b]}class g extends a.a{constructor(e){super(),Object(a.C)(this,e,j,null,a.L,{styles:0,position:1})}}var O=g,h=o(2);o(5);const{document:f}=a.A;function y(e){let t,o,s,l,n,c,i,r,p,m,u,j;return t=new O({props:{styles:e[0].map.styles}}),t.$on("change",e[9]),s=new e[5]({props:{position:"top-right",options:{trackUserLocation:!0}}}),s.$on("geolocate",x),n=new e[6]({}),i=new e[7]({props:{position:"bottom-left"}}),p=new b({props:{position:"bottom-left"}}),u=new d({}),{c(){Object(a.q)(t.$$.fragment),o=Object(a.P)(),Object(a.q)(s.$$.fragment),l=Object(a.P)(),Object(a.q)(n.$$.fragment),c=Object(a.P)(),Object(a.q)(i.$$.fragment),r=Object(a.P)(),Object(a.q)(p.$$.fragment),m=Object(a.P)(),Object(a.q)(u.$$.fragment)},l(e){Object(a.k)(t.$$.fragment,e),o=Object(a.m)(e),Object(a.k)(s.$$.fragment,e),l=Object(a.m)(e),Object(a.k)(n.$$.fragment,e),c=Object(a.m)(e),Object(a.k)(i.$$.fragment,e),r=Object(a.m)(e),Object(a.k)(p.$$.fragment,e),m=Object(a.m)(e),Object(a.k)(u.$$.fragment,e)},m(e,b){Object(a.F)(t,e,b),Object(a.D)(e,o,b),Object(a.F)(s,e,b),Object(a.D)(e,l,b),Object(a.F)(n,e,b),Object(a.D)(e,c,b),Object(a.F)(i,e,b),Object(a.D)(e,r,b),Object(a.F)(p,e,b),Object(a.D)(e,m,b),Object(a.F)(u,e,b),j=!0},p(e,o){const a={};1&o&&(a.styles=e[0].map.styles),t.$set(a)},i(e){j||(Object(a.S)(t.$$.fragment,e),Object(a.S)(s.$$.fragment,e),Object(a.S)(n.$$.fragment,e),Object(a.S)(i.$$.fragment,e),Object(a.S)(p.$$.fragment,e),Object(a.S)(u.$$.fragment,e),j=!0)},o(e){Object(a.T)(t.$$.fragment,e),Object(a.T)(s.$$.fragment,e),Object(a.T)(n.$$.fragment,e),Object(a.T)(i.$$.fragment,e),Object(a.T)(p.$$.fragment,e),Object(a.T)(u.$$.fragment,e),j=!1},d(e){Object(a.s)(t,e),e&&Object(a.u)(o),Object(a.s)(s,e),e&&Object(a.u)(l),Object(a.s)(n,e),e&&Object(a.u)(c),Object(a.s)(i,e),e&&Object(a.u)(r),Object(a.s)(p,e),e&&Object(a.u)(m),Object(a.s)(u,e)}}}function $(e){let t,o,l,n,c,i,r,b,p,m,d,u,j=e[0].map.filter.iso_3166_1_label+"",g={accessToken:e[0].map.accessToken,style:e[3],options:{hash:!0,attributionControl:!0},version:"v2.0.0",$$slots:{default:[y]},$$scope:{ctx:e}};p=new s.a({props:g}),e[11](p),p.$on("ready",e[8]),p.$on("recentre",e[10]);let O=!1;return{c(){t=Object(a.v)("section"),o=Object(a.v)("h1"),l=Object(a.v)("span"),n=Object(a.R)(j),c=Object(a.P)(),i=Object(a.R)(e[2]),r=Object(a.P)(),b=Object(a.v)("div"),Object(a.q)(p.$$.fragment),m=Object(a.P)(),d=Object(a.v)("div"),O&&O.c(),this.h()},l(s){t=Object(a.l)(s,"SECTION",{class:!0});var u=Object(a.j)(t);o=Object(a.l)(u,"H1",{class:!0});var g=Object(a.j)(o);l=Object(a.l)(g,"SPAN",{class:!0});var h=Object(a.j)(l);n=Object(a.n)(h,j),h.forEach(a.u),c=Object(a.m)(g),i=Object(a.n)(g,e[2]),g.forEach(a.u),u.forEach(a.u),r=Object(a.m)(s),b=Object(a.l)(s,"DIV",{id:!0,class:!0});var f=Object(a.j)(b);Object(a.k)(p.$$.fragment,f),f.forEach(a.u),m=Object(a.m)(s),d=Object(a.l)(s,"DIV",{id:!0,class:!0});var y=Object(a.j)(d);O&&O.l(y),y.forEach(a.u),this.h()},h(){Object(a.f)(l,"class","block svelte-2gz3r1"),Object(a.f)(o,"class","uk-no-margin uk-float-left"),Object(a.f)(t,"class","svelte-2gz3r1"),Object(a.f)(b,"id","map"),Object(a.f)(b,"class","svelte-2gz3r1"),Object(a.f)(d,"id","locator-map"),Object(a.f)(d,"class","svelte-2gz3r1")},m(e,s){Object(a.D)(e,t,s),Object(a.d)(t,o),Object(a.d)(o,l),Object(a.d)(l,n),Object(a.d)(o,c),Object(a.d)(o,i),Object(a.D)(e,r,s),Object(a.D)(e,b,s),Object(a.F)(p,b,null),Object(a.D)(e,m,s),Object(a.D)(e,d,s),O&&O.m(d,null),u=!0},p(e,[t]){(!u||1&t)&&j!==(j=e[0].map.filter.iso_3166_1_label+"")&&Object(a.N)(n,j),(!u||4&t)&&Object(a.N)(i,e[2]);const o={};1&t&&(o.accessToken=e[0].map.accessToken),8&t&&(o.style=e[3]),268435457&t&&(o.$$scope={dirty:t,ctx:e}),p.$set(o),O&&(O.d(1),O=null)},i(e){u||(Object(a.S)(p.$$.fragment,e),u=!0)},o(e){Object(a.T)(p.$$.fragment,e),u=!1},d(o){o&&Object(a.u)(t),o&&Object(a.u)(r),o&&Object(a.u)(b),e[11](null),Object(a.s)(p),o&&Object(a.u)(m),o&&Object(a.u)(d),O&&O.d()}}}function x(e){}function v(e,t,o){let c;const{preloading:i,page:r,session:b}=Object(h.b)();Object(a.o)(e,r,e=>o(13,c=e));const{GeolocateControl:p,NavigationControl:m,ScaleControl:d}=s.b;let u,j;Object(l.f)(n,{getMap:()=>u,getMapbox:()=>j});let{settings:g={user:{locale:"en-US",language:"en",fallbackLanguage:"en",location:{iso_3166_1:null,geoip:null,gps:null}},map:{accessToken:"pk.eyJ1IjoicGxhbmVtYWQiLCJhIjoiY2l3ZmNjNXVzMDAzZzJ0cDV6b2lkOG9odSJ9.eep6sUoBS0eMN4thZUWpyQ",worldview:"US",style:"Railway",styles:[{label:"Streets",styleName:"Mapbox Streets",styleUrl:"mapbox://styles/mapbox/streets-v9"},{label:"Boundaries",styleName:"Boundaries",styleUrl:"mapbox://styles/planemad/ckimruzo31c1f17mejyp2a2go"},{label:"Railway",styleName:"Railway",styleUrl:"mapbox://styles/planemad/ck7p3wxmp0q571imu99elwqs1"},{label:"Hydrology",styleName:"Hydrology",styleUrl:"mapbox://styles/planemad/ckd42fwa20n531iqrewerwla1"},{label:"OpenStreetMap",styleName:"OpenStreetMap",styleUrl:"https://cdn.jsdelivr.net/gh/osm-in/mapbox-gl-styles@latest/osm-mapnik-india-v8.json"},{label:"Tourist",srtyleName:"Tourist",styleUrl:"mapbox://styles/planemad/ckhijjwug10ht19mjwvno5o38"}],locationContext:null,filter:{iso_3166_1:null,iso_3166_1_label:"...",iso_3166_2:null,iso_3166_2_label:null}}}}=t;function O(e){console.log(y);let t=u.getCenter(),a=`https://api.mapbox.com/geocoding/v5/mapbox.places/${t.lng}%2C${t.lat}.json?access_token=${g.map.accessToken}&cachebuster=1606707965137&autocomplete=true&worldview=${g.map.worldview.toLocaleLowerCase()}&types=country%2Cregion%2Cdistrict%2Cpostcode%2Clocality%2Cplace%2Cneighborhood%2Caddress%2Cpoi&language=${g.user.language}`;fetch(a).then(e=>e.json()).then(e=>{o(0,g.map.locationContext=e,g),o(0,g.map.filter.iso_3166_1_label=e.features[e.features.length-1]["text_"+g.user.language],g),o(0,g.map.filter.iso_3166_1=e.features[e.features.length-1].properties.short_code,g)})}function f(e){if(x>0&&(u.getSource("mapbox-dem")||(u.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),u.setTerrain({source:"mapbox-dem",exaggeration:["interpolate",["linear"],["zoom"],1,Math.pow(x,3),3,Math.pow(x,2),8,Math.pow(x,1),14,1]}))),u.getSource("3d-hillshade")||(u.addSource("3d-hillshade",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),u.addLayer({id:"3d-hillshade",source:"3d-hillshade",type:"hillshade",paint:{"hillshade-shadow-color":"#0f0f0f","hillshade-highlight-color":"#ffffff","hillshade-accent-color":"#625e3c","hillshade-exaggeration":["interpolate",["linear"],["zoom"],4,.5,12,.2,20,.1],"hillshade-shadow-color":"#0f0f0f"}})),!u.getLayer("3d-buildings")){u.getSource("composite")||u.addSource("composite",{type:"vector",url:"mapbox://mapbox.mapbox-streets-v8"});for(var t,o=u.getStyle().layers,a=0;a<o.length;a++)if("symbol"===o[a].type&&o[a].layout["text-field"]){t=o[a].id;break}u.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.8}},t)}u.getLayer("sky")||u.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":2}})}let y,$,x,v;return Object(l.e)(()=>{const e=document.createElement("link");var t;return e.rel="stylesheet",e.href="https://raw.githack.com/bravecow/mapbox-gl-controls/master/theme.css",document.body.appendChild(e),(t=new XMLHttpRequest).open("GET","https://www.cloudflare.com/cdn-cgi/trace"),t.onreadystatechange=()=>{t.readyState==XMLHttpRequest.DONE&&200==t.status&&o(0,g.user.location.iso_3166_1=t.responseText.match(/loc=([^\n+]*)/)[1],g)},t.send(null),()=>{u.remove(),e.parentNode.removeChild(e)}}),e.$$set=e=>{"settings"in e&&o(0,g=e.settings)},e.$$.update=()=>{8193&e.$$.dirty&&o(0,g.map.worldview=c.query.worldview||g.map.worldview,g),8193&e.$$.dirty&&o(2,y=g.map.styles.map(e=>e.label).indexOf(c.query.map)>-1?c.query.map:g.map.style),8197&e.$$.dirty&&o(3,$=c.query.style||g.map.styles.filter(e=>e.label==y)[0].styleUrl),8192&e.$$.dirty&&(x=c.query.terrain||2),8192&e.$$.dirty&&(v=c.query.place||"")},[g,j,y,$,r,p,m,d,function(e){u=j.getMap(),O(e),f()},function(e){o(2,y=e.detail.style.label);let t=window.location;console.log(t.href),window.history.pushState({additionalInformation:"Updated the URL with JS"},"Public Map","a"),u.on("styledata",(function(){f()}))},O,function(e){a.h[e?"unshift":"push"](()=>{j=e,o(1,j)})}]}class w extends a.a{constructor(e){var t;super(),f.getElementById("svelte-2gz3r1-style")||((t=Object(a.v)("style")).id="svelte-2gz3r1-style",t.textContent="#map.svelte-2gz3r1{height:100vh}#locator-map.svelte-2gz3r1{position:absolute;right:10px;bottom:10px}section.svelte-2gz3r1{position:absolute;left:46px;top:12px;z-index:99}span.block.svelte-2gz3r1{padding:0 4px;background-color:rgba(255, 255, 255, 0.5)}.mapboxgl-control-container > * > :not(.mapboxgl-ctrl-attrib){opacity:0.2;transition:opacity 2s ease-out;z-index:99}.mapboxgl-control-container:hover > * > *{opacity:1;transition:opacity 0.1s ease-in}.mapboxgl-ctrl-geocoder{width:30px;min-width:30px}.mapboxgl-ctrl-geocoder .suggestions li, .mapboxgl-ctrl-geocoder\n      div{display:none}.mapboxgl-ctrl-geocoder:hover{width:200px;min-width:inherit;transition:width 0.3s ease-in-out}.mapboxgl-ctrl-geocoder:hover\n      .suggestions\n      li, .mapboxgl-ctrl-geocoder:hover div{display:inherit}",Object(a.d)(f.head,t)),Object(a.C)(this,e,v,$,a.L,{settings:0})}}var k=w;function S(e){let t,o,s,l;function n(t){e[1].call(null,t)}let c={};return void 0!==e[0]&&(c.map=e[0]),o=new k({props:c}),a.h.push(()=>Object(a.g)(o,"map",n)),{c(){t=Object(a.P)(),Object(a.q)(o.$$.fragment),this.h()},l(e){Object(a.J)('[data-svelte="svelte-14wj8fu"]',document.head).forEach(a.u),t=Object(a.m)(e),Object(a.k)(o.$$.fragment,e),this.h()},h(){document.title="Atlas"},m(e,s){Object(a.D)(e,t,s),Object(a.F)(o,e,s),l=!0},p(e,[t]){const l={};!s&&1&t&&(s=!0,l.map=e[0],Object(a.b)(()=>s=!1)),o.$set(l)},i(e){l||(Object(a.S)(o.$$.fragment,e),l=!0)},o(e){Object(a.T)(o.$$.fragment,e),l=!1},d(e){e&&Object(a.u)(t),Object(a.s)(o,e)}}}function C(e,t,o){let a;return[a,function(e){a=e,o(0,a)}]}class _ extends a.a{constructor(e){super(),Object(a.C)(this,e,C,S,a.L,{})}}t.default=_}}]);