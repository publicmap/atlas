(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{22:function(e,t,o){"use strict";o.r(t);var a=o(0),l=o(18),s=o(1);const n={};var c=o(9);function i(e,t,o){const{getMap:a,getMapbox:l}=Object(s.c)(n),i=a();l();let{position:r="bottom-right"}=t,{options:b={}}=t;return i.addControl(new c.a,r),e.$$set=e=>{"position"in e&&o(0,r=e.position),"options"in e&&o(1,b=e.options)},[r,b]}class r extends a.a{constructor(e){super(),Object(a.C)(this,e,i,null,a.L,{position:0,options:1})}}var b=r;function p(e,t,o){const{getMap:a,getMapbox:l}=Object(s.c)(n),c=a();l();let{position:i="bottom-left"}=t,{options:r={}}=t;class b{constructor(e={}){this.container=document.createElement("div")}onAdd(e){return this.map=e,this.map.on("mapTitle",this.titleListener),this.container}onRemove(){this.map.off("mapTitle",this.titleListener),this.map=void 0}styleChangeListener(){this.map.off("mapTitle",this.titleListener),this.setTitle("HI")}setTitle(e){return e}}return c.addControl(new b,i),e.$$set=e=>{"position"in e&&o(0,i=e.position),"options"in e&&o(1,r=e.options)},[i,r,b]}class m extends a.a{constructor(e){super(),Object(a.C)(this,e,p,null,a.L,{position:0,options:1,LanguageControl:2})}get LanguageControl(){return this.$$.ctx[2]}}var d=m,u=o(13);function j(e,t,o){const a=Object(s.b)(),{getMap:l,getMapbox:c}=Object(s.c)(n),i=l();c();let{styles:r=[{label:"Streets",styleName:"Mapbox Streets",styleUrl:"mapbox://styles/mapbox/streets-v9"},{label:"Satellite",styleName:"Satellite",styleUrl:"mapbox://styles/mapbox/satellite-v9"}]}=t,{position:b="bottom-right"}=t;return i.addControl(new u.a({styles:r,onChange:e=>a("change",{style:e})}),b),e.$$set=e=>{"styles"in e&&o(0,r=e.styles),"position"in e&&o(1,b=e.position)},[r,b]}class O extends a.a{constructor(e){super(),Object(a.C)(this,e,j,null,a.L,{styles:0,position:1})}}var y=O,g=o(2);Object(g.a)({title:"Public Map"});var h=o(3),f=o(6);const{document:$}=a.A;function x(e){let t,o=(e[0].pageTitle||e[0].map.locationContext.features.length&&e[0].map.locationContext.features.filter(k)[0].text+"/"+e[0].map.locationContext.features.filter(S)[0].text||"")+"";return{c(){t=Object(a.R)(o)},l(e){t=Object(a.n)(e,o)},m(e,o){Object(a.D)(e,t,o)},p(e,l){1&l[0]&&o!==(o=(e[0].pageTitle||e[0].map.locationContext.features.length&&e[0].map.locationContext.features.filter(k)[0].text+"/"+e[0].map.locationContext.features.filter(S)[0].text||"")+"")&&Object(a.N)(t,o)},d(e){e&&Object(a.u)(t)}}}function v(e){let t,o,l,s,n,c,i,r,p,m,u,j;return t=new y({props:{styles:e[0].map.styles}}),t.$on("change",e[10]),l=new e[6]({props:{position:"top-right",options:{trackUserLocation:!0}}}),l.$on("geolocate",C),n=new e[7]({}),i=new e[8]({props:{position:"bottom-left"}}),p=new b({props:{position:"bottom-left"}}),u=new d({}),{c(){Object(a.q)(t.$$.fragment),o=Object(a.P)(),Object(a.q)(l.$$.fragment),s=Object(a.P)(),Object(a.q)(n.$$.fragment),c=Object(a.P)(),Object(a.q)(i.$$.fragment),r=Object(a.P)(),Object(a.q)(p.$$.fragment),m=Object(a.P)(),Object(a.q)(u.$$.fragment)},l(e){Object(a.k)(t.$$.fragment,e),o=Object(a.m)(e),Object(a.k)(l.$$.fragment,e),s=Object(a.m)(e),Object(a.k)(n.$$.fragment,e),c=Object(a.m)(e),Object(a.k)(i.$$.fragment,e),r=Object(a.m)(e),Object(a.k)(p.$$.fragment,e),m=Object(a.m)(e),Object(a.k)(u.$$.fragment,e)},m(e,b){Object(a.F)(t,e,b),Object(a.D)(e,o,b),Object(a.F)(l,e,b),Object(a.D)(e,s,b),Object(a.F)(n,e,b),Object(a.D)(e,c,b),Object(a.F)(i,e,b),Object(a.D)(e,r,b),Object(a.F)(p,e,b),Object(a.D)(e,m,b),Object(a.F)(u,e,b),j=!0},p(e,o){const a={};1&o[0]&&(a.styles=e[0].map.styles),t.$set(a)},i(e){j||(Object(a.S)(t.$$.fragment,e),Object(a.S)(l.$$.fragment,e),Object(a.S)(n.$$.fragment,e),Object(a.S)(i.$$.fragment,e),Object(a.S)(p.$$.fragment,e),Object(a.S)(u.$$.fragment,e),j=!0)},o(e){Object(a.T)(t.$$.fragment,e),Object(a.T)(l.$$.fragment,e),Object(a.T)(n.$$.fragment,e),Object(a.T)(i.$$.fragment,e),Object(a.T)(p.$$.fragment,e),Object(a.T)(u.$$.fragment,e),j=!1},d(e){Object(a.s)(t,e),e&&Object(a.u)(o),Object(a.s)(l,e),e&&Object(a.u)(s),Object(a.s)(n,e),e&&Object(a.u)(c),Object(a.s)(i,e),e&&Object(a.u)(r),Object(a.s)(p,e),e&&Object(a.u)(m),Object(a.s)(u,e)}}}function w(e){let t,o,s,n,c,i,r,b,p,m,d,u,j,O,y,g=(e[4]||"")+"",h=e[0].map.styleName+"",f=(e[0].pageTitle||e[0].map.filter.iso_3166_1)&&x(e),$={accessToken:e[0].map.accessToken,style:e[3],options:{hash:!0,attributionControl:!0,customAttribution:e[2]},version:"v2.0.1",$$slots:{default:[v]},$$scope:{ctx:e}};u=new l.a({props:$}),e[12](u),u.$on("ready",e[9]),u.$on("recentre",e[11]);let w=!1;return{c(){t=Object(a.v)("section"),o=Object(a.v)("h1"),s=Object(a.v)("span"),f&&f.c(),n=Object(a.P)(),c=Object(a.v)("p"),i=Object(a.v)("span"),r=Object(a.R)(g),b=Object(a.R)(". Map Style\n    "),p=Object(a.R)(h),m=Object(a.P)(),d=Object(a.v)("div"),Object(a.q)(u.$$.fragment),j=Object(a.P)(),O=Object(a.v)("div"),w&&w.c(),this.h()},l(e){t=Object(a.l)(e,"SECTION",{class:!0});var l=Object(a.j)(t);o=Object(a.l)(l,"H1",{class:!0});var y=Object(a.j)(o);s=Object(a.l)(y,"SPAN",{class:!0});var $=Object(a.j)(s);f&&f.l($),$.forEach(a.u),y.forEach(a.u),n=Object(a.m)(l),c=Object(a.l)(l,"P",{class:!0});var x=Object(a.j)(c);i=Object(a.l)(x,"SPAN",{id:!0,class:!0});var v=Object(a.j)(i);r=Object(a.n)(v,g),v.forEach(a.u),b=Object(a.n)(x,". Map Style\n    "),p=Object(a.n)(x,h),x.forEach(a.u),l.forEach(a.u),m=Object(a.m)(e),d=Object(a.l)(e,"DIV",{id:!0,class:!0});var C=Object(a.j)(d);Object(a.k)(u.$$.fragment,C),C.forEach(a.u),j=Object(a.m)(e),O=Object(a.l)(e,"DIV",{id:!0,class:!0});var k=Object(a.j)(O);w&&w.l(k),k.forEach(a.u),this.h()},h(){Object(a.f)(s,"class","block svelte-1mjb4ry"),Object(a.f)(o,"class","uk-no-margin"),Object(a.f)(i,"id","description"),Object(a.f)(i,"class","svelte-1mjb4ry"),Object(a.f)(c,"class","uk-text-lead"),Object(a.f)(t,"class","svelte-1mjb4ry"),Object(a.f)(d,"id","map"),Object(a.f)(d,"class","svelte-1mjb4ry"),Object(a.f)(O,"id","locator-map"),Object(a.f)(O,"class","svelte-1mjb4ry")},m(e,l){Object(a.D)(e,t,l),Object(a.d)(t,o),Object(a.d)(o,s),f&&f.m(s,null),Object(a.d)(t,n),Object(a.d)(t,c),Object(a.d)(c,i),Object(a.d)(i,r),Object(a.d)(c,b),Object(a.d)(c,p),Object(a.D)(e,m,l),Object(a.D)(e,d,l),Object(a.F)(u,d,null),Object(a.D)(e,j,l),Object(a.D)(e,O,l),w&&w.m(O,null),y=!0},p(e,t){e[0].pageTitle||e[0].map.filter.iso_3166_1?f?f.p(e,t):(f=x(e),f.c(),f.m(s,null)):f&&(f.d(1),f=null),(!y||16&t[0])&&g!==(g=(e[4]||"")+"")&&Object(a.N)(r,g),(!y||1&t[0])&&h!==(h=e[0].map.styleName+"")&&Object(a.N)(p,h);const o={};1&t[0]&&(o.accessToken=e[0].map.accessToken),8&t[0]&&(o.style=e[3]),4&t[0]&&(o.options={hash:!0,attributionControl:!0,customAttribution:e[2]}),1&t[0]|2&t[1]&&(o.$$scope={dirty:t,ctx:e}),u.$set(o),w&&(w.d(1),w=null)},i(e){y||(Object(a.S)(u.$$.fragment,e),y=!0)},o(e){Object(a.T)(u.$$.fragment,e),y=!1},d(o){o&&Object(a.u)(t),f&&f.d(),o&&Object(a.u)(m),o&&Object(a.u)(d),e[12](null),Object(a.s)(u),o&&Object(a.u)(j),o&&Object(a.u)(O),w&&w.d()}}}function C(e){}const k=e=>e.place_type.indexOf("country")>-1,S=e=>e.place_type.indexOf("region")>-1;function _(e,t,c){let i;o(14);const{preloading:r,page:b,session:p}=Object(h.b)();Object(a.o)(e,b,e=>c(15,i=e));const{GeolocateControl:m,NavigationControl:d,ScaleControl:u}=l.b;let j,O,y;Object(s.f)(n,{getMap:()=>j,getMapbox:()=>O});let{settings:g={user:{locale:"en-US",language:"en",fallbackLanguage:"en",location:{iso_3166_1:null,geoip:null,gps:null}},map:{accessToken:null,attribution:null,worldview:"US",style:null,styles:[{label:"Satellite",styleName:"Mapbox Satellite",styleUrl:"mapbox://styles/mapbox/satellite-streets-v11"},{label:"Railway",styleName:"Railway",styleUrl:"mapbox://styles/planemad/ck7p3wxmp0q571imu99elwqs1"},{label:"Hydrology",styleName:"Hydrology",styleUrl:"mapbox://styles/planemad/ckd42fwa20n531iqrewerwla1"},{label:"OpenStreetMap",styleName:"OpenStreetMap",styleUrl:"https://cdn.jsdelivr.net/gh/osm-in/mapbox-gl-styles@latest/osm-mapnik-india-v8.json"},{label:"Connectivity",styleName:"Connectivity",styleUrl:"mapbox://styles/planemad/ckhijjwug10ht19mjwvno5o38"}],locationContext:null,filter:{iso_3166_1:null,iso_3166_1_label:"...",iso_3166_2:null,iso_3166_2_label:null}}}}=t;g.map.style=i.query.style?g.map.styles.map(e=>e.label).indexOf(i.query.style)>-1?i.query.style:"Custom":g.map.styles[0].styleName;function $(e){let t=j.getCenter(),o=`https://api.mapbox.com/geocoding/v5/mapbox.places/${t.lng}%2C${t.lat}.json?access_token=${g.map.accessToken}&worldview=${g.map.worldview.toLocaleLowerCase()}&types=country%2Cregion%2Cdistrict%2Cpostcode%2Clocality%2Cplace%2Cneighborhood%2Caddress%2Cpoi&language=${g.user.language}`;fetch(o).then(e=>e.json()).then(e=>{c(0,g.map.locationContext=e,g),e.features.length&&(c(0,g.map.filter.iso_3166_1_label=e.features[e.features.length-1]["text_"+g.user.language],g),c(0,g.map.filter.iso_3166_1=e.features[e.features.length-1].properties.short_code,g))})}function x(){if(c(0,g.map.styleName=j.getStyle().name,g),C>0&&(j.getSource("mapbox-dem")||(j.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),j.setTerrain({source:"mapbox-dem",exaggeration:["interpolate",["linear"],["zoom"],0,C*Math.pow(2,4),1,C*Math.pow(2,3),2,C*Math.pow(2,2),10,C*Math.pow(2,1),16,1]}))),!j.getSource("3d-hillshade")){j.addSource("3d-hillshade",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14});let e=j.getStyle().layers.filter(e=>"symbol"==e.type);j.addLayer({id:"3d-hillshade",source:"3d-hillshade",type:"hillshade",paint:{"hillshade-shadow-color":"#0f0f0f","hillshade-highlight-color":"#ffffff","hillshade-accent-color":"#625e3c","hillshade-exaggeration":["interpolate",["linear"],["zoom"],1,.7,6,.4,16,.1]}},e.length?e[0].id:null)}if(!j.getLayer("3d-buildings")){j.getSource("composite")||j.addSource("composite",{type:"vector",url:"mapbox://mapbox.mapbox-streets-v8"});for(var e,t=j.getStyle().layers,o=0;o<t.length;o++)if("symbol"===t[o].type&&t[o].layout["text-field"]){e=t[o].id;break}j.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.8}},e)}j.getLayer("sky")||j.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":2}})}let v,w,C,k,S,_;return Object(s.e)(()=>{const e=document.createElement("link");var t;return e.rel="stylesheet",e.href="https://raw.githack.com/bravecow/mapbox-gl-controls/master/theme.css",document.body.appendChild(e),(t=new XMLHttpRequest).open("GET","https://www.cloudflare.com/cdn-cgi/trace"),t.onreadystatechange=()=>{t.readyState==XMLHttpRequest.DONE&&200==t.status&&(c(0,g.user.location.iso_3166_1=t.responseText.match(/loc=([^\n+]*)/)[1],g),y=f.filter(e=>!("all"!=e.worldview&&e.worldview!=g.mapWorldview||"sovereign state"!=e.description&&"dependent territory"!=e.description)),console.log(y))},t.send(null),()=>{j.remove(),e.parentNode.removeChild(e)}}),e.$$set=e=>{"settings"in e&&c(0,g=e.settings)},e.$$.update=()=>{32768&e.$$.dirty[0]&&c(2,v=i.query.attribution||null),32769&e.$$.dirty[0]&&c(0,g.map.worldview=i.query.worldview||g.map.worldview,g),32768&e.$$.dirty[0]&&c(0,g.map.accessToken=i.query.access_token||"pk.eyJ1IjoicGxhbmVtYWQiLCJhIjoiY2l3ZmNjNXVzMDAzZzJ0cDV6b2lkOG9odSJ9.eep6sUoBS0eMN4thZUWpyQ",g),32769&e.$$.dirty[0]&&c(3,w="Custom"==g.map.style?i.query.style:g.map.styles.filter(e=>e.label==g.map.style)[0].styleUrl),32768&e.$$.dirty[0]&&(C=i.query.terrain||1.5),32768&e.$$.dirty[0]&&(k=i.query.title||null),32768&e.$$.dirty[0]&&c(4,S=i.query.description||null),32768&e.$$.dirty[0]&&(_=i.query.place||"")},[g,O,v,w,S,b,m,d,u,function(e){j=O.getMap(),$(e),x()},function(e){c(0,g.map.style=e.detail.style.label,g);const t=`?style=${g.map.style}${window.location.hash}`;window.history.pushState({additionalInformation:"Updated the URL with JS"},"Public Map",t),j.once("styledata",(function(e){x()}))},$,function(e){a.h[e?"unshift":"push"](()=>{O=e,c(1,O)})}]}class T extends a.a{constructor(e){var t;super(),$.getElementById("svelte-1mjb4ry-style")||((t=Object(a.v)("style")).id="svelte-1mjb4ry-style",t.textContent="#map.svelte-1mjb4ry{height:100vh}#locator-map.svelte-1mjb4ry{position:absolute;right:10px;bottom:10px}section.svelte-1mjb4ry{position:absolute;left:46px;top:12px;z-index:99}span.block.svelte-1mjb4ry{padding:0 4px;background-color:rgba(255, 255, 255, 0.5)}#description.svelte-1mjb4ry{background-color:rgba(255, 255, 255, 0.5);color:#111;padding:3px}#description.svelte-1mjb4ry:empty{display:none}.mapboxgl-control-container > * > *{opacity:0;transition:opacity 5s ease-out;z-index:99}.mapboxgl-ctrl-attrib, .mapboxgl-ctrl-bottom-left\n      > .mapboxgl-ctrl:nth-child(3), .mapboxgl-ctrl-bottom-left\n      > .mapboxgl-ctrl:nth-child(4){opacity:1;transition:opacity 0.1s ease-out;z-index:99}.mapboxgl-control-container:hover > * > *{opacity:1;transition:opacity 0.1s ease-in}.mapboxgl-ctrl-geocoder{width:30px;min-width:30px}.mapboxgl-ctrl-geocoder .suggestions li, .mapboxgl-ctrl-geocoder\n      div{display:none}.mapboxgl-ctrl-geocoder:hover{width:200px;min-width:inherit;transition:width 0.3s ease-in-out}.mapboxgl-ctrl-geocoder:hover\n      .suggestions\n      li, .mapboxgl-ctrl-geocoder:hover div{display:inherit}",Object(a.d)($.head,t)),Object(a.C)(this,e,_,w,a.L,{settings:0},[-1,-1])}}var M=T;function q(e){let t,o,l,s;function n(t){e[1].call(null,t)}let c={};return void 0!==e[0]&&(c.map=e[0]),o=new M({props:c}),a.h.push(()=>Object(a.g)(o,"map",n)),{c(){t=Object(a.P)(),Object(a.q)(o.$$.fragment),this.h()},l(e){Object(a.J)('[data-svelte="svelte-14wj8fu"]',document.head).forEach(a.u),t=Object(a.m)(e),Object(a.k)(o.$$.fragment,e),this.h()},h(){document.title="Atlas"},m(e,l){Object(a.D)(e,t,l),Object(a.F)(o,e,l),s=!0},p(e,[t]){const s={};!l&&1&t&&(l=!0,s.map=e[0],Object(a.b)(()=>l=!1)),o.$set(s)},i(e){s||(Object(a.S)(o.$$.fragment,e),s=!0)},o(e){Object(a.T)(o.$$.fragment,e),s=!1},d(e){e&&Object(a.u)(t),Object(a.s)(o,e)}}}function L(e,t,o){let a;return[a,function(e){a=e,o(0,a)}]}class N extends a.a{constructor(e){super(),Object(a.C)(this,e,L,q,a.L,{})}}t.default=N}}]);